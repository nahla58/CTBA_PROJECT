{"ast":null,"code":"import _objectSpread from\"C:/essai/CTBA_PROJECT/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'./BulletinManagement.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BulletinManagement(){var _stats$by_status,_stats$by_status2;const[bulletins,setBulletins]=useState([]);const[regions,setRegions]=useState([]);const[loading,setLoading]=useState(true);const[showCreateModal,setShowCreateModal]=useState(false);const[showPreviewModal,setShowPreviewModal]=useState(false);const[selectedBulletin,setSelectedBulletin]=useState(null);const[previewData,setPreviewData]=useState(null);const[formData,setFormData]=useState({title:'',body:'',regions:[],cve_ids:[]});const[stats,setStats]=useState({total_bulletins:0,by_status:{},total_recipients_contacted:0});// Charger donn√©es au d√©marrage\nuseEffect(()=>{fetchBulletins();fetchRegions();fetchStats();},[]);const fetchBulletins=async()=>{try{const response=await fetch('http://localhost:8000/api/bulletins?limit=50&offset=0');const data=await response.json();setBulletins(data.bulletins||[]);}catch(error){console.error('Erreur chargement bulletins:',error);alert('Erreur: '+error.message);}finally{setLoading(false);}};const fetchRegions=async()=>{try{const response=await fetch('http://localhost:8000/api/regions');const data=await response.json();setRegions(data||[]);}catch(error){console.error('Erreur chargement r√©gions:',error);}};const fetchStats=async()=>{try{const response=await fetch('http://localhost:8000/api/bulletins/stats/overview');const data=await response.json();setStats(data);}catch(error){console.error('Erreur chargement stats:',error);}};// Cr√©er bulletin\nconst handleCreateBulletin=async e=>{e.preventDefault();if(!formData.title.trim()){alert('Le titre est requis');return;}if(formData.regions.length===0){alert('S√©lectionnez au moins une r√©gion');return;}try{const response=await fetch('http://localhost:8000/api/bulletins',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},formData),{},{created_by:'analyst1'}))});if(!response.ok)throw new Error('Erreur cr√©ation bulletin');alert('‚úÖ Bulletin cr√©√© avec succ√®s!');setFormData({title:'',body:'',regions:[],cve_ids:[]});setShowCreateModal(false);fetchBulletins();fetchStats();}catch(error){console.error('Erreur:',error);alert('Erreur: '+error.message);}};// Afficher aper√ßu\nconst handlePreview=async bulletin=>{try{const response=await fetch(\"http://localhost:8000/api/bulletins/\".concat(bulletin.id,\"/preview\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({regions:bulletin.regions})});if(!response.ok)throw new Error('Erreur aper√ßu');const data=await response.json();setPreviewData(data);setSelectedBulletin(bulletin);setShowPreviewModal(true);}catch(error){console.error('Erreur:',error);alert('Erreur: '+error.message);}};// Envoyer bulletin\nconst handleSendBulletin=async function(bulletinId){let testMode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;try{const bulletin=bulletins.find(b=>b.id===bulletinId);const response=await fetch(\"http://localhost:8000/api/bulletins/\".concat(bulletinId,\"/send\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({test_mode:testMode,regions:bulletin.regions})});if(!response.ok)throw new Error('Erreur envoi');const data=await response.json();alert(testMode?'‚úÖ Mode test: Email enregistr√© en log':'‚úÖ Bulletin envoy√©!');setShowPreviewModal(false);// Traiter la queue\nsetTimeout(()=>{fetch('http://localhost:8000/api/bulletins/process-queue',{method:'POST'});fetchBulletins();fetchStats();},1000);}catch(error){console.error('Erreur:',error);alert('Erreur: '+error.message);}};// Voir historique\nconst handleViewHistory=async bulletinId=>{try{const response=await fetch(\"http://localhost:8000/api/bulletins/\".concat(bulletinId,\"/history\"));if(!response.ok)throw new Error('Erreur');const data=await response.json();alert(\"\\uD83D\\uDCDC Historique Bulletin \".concat(bulletinId,\"\\n\\n\")+\"Statut: \".concat(data.bulletin.status,\"\\n\")+\"Envoy\\xE9s: \".concat(data.statistics.total_sent,\"\\n\")+\"\\xC9chou\\xE9s: \".concat(data.statistics.total_failed,\"\\n\")+\"Taux r\\xE9ussite: \".concat(data.statistics.success_rate.toFixed(1),\"%\\n\\n\")+\"Logs:\\n\"+data.delivery_logs.map(l=>\"- \".concat(l.action,\" \\xE0 \").concat(l.region)).join('\\n'));}catch(error){console.error('Erreur:',error);alert('Erreur: '+error.message);}};// Supprimer bulletin\nconst handleDeleteBulletin=async bulletinId=>{if(!window.confirm('√ätes-vous s√ªr?'))return;try{const response=await fetch(\"http://localhost:8000/api/bulletins/\".concat(bulletinId),{method:'DELETE'});if(!response.ok)throw new Error('Erreur');alert('‚úÖ Bulletin supprim√©');fetchBulletins();fetchStats();}catch(error){console.error('Erreur:',error);alert('Erreur: '+error.message);}};const handleRegionToggle=regionName=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{regions:prev.regions.includes(regionName)?prev.regions.filter(r=>r!==regionName):[...prev.regions,regionName]}));};if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',textAlign:'center'},children:\"\\u23F3 Chargement...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bulletin-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bulletin-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDCE7 Gestion des Bulletins\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:()=>setShowCreateModal(true),children:\"\\u2795 Nouveau Bulletin\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.total_bulletins}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Bulletins Totaux\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:((_stats$by_status=stats.by_status)===null||_stats$by_status===void 0?void 0:_stats$by_status.DRAFT)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Brouillons\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:((_stats$by_status2=stats.by_status)===null||_stats$by_status2===void 0?void 0:_stats$by_status2.SENT)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Envoy\\xE9s\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.total_recipients_contacted||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Destinataires\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bulletins-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Bulletins R\\xE9cents\"}),bulletins.length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:'#999'},children:\"Aucun bulletin trouv\\xE9\"}):/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"bulletins-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Titre\"}),/*#__PURE__*/_jsx(\"th\",{children:\"R\\xE9gions\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Statut\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cr\\xE9\\xE9 par\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bulletins.map(bulletin=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:bulletin.title})}),/*#__PURE__*/_jsx(\"td\",{children:bulletin.regions.join(', ')}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge status-\".concat(bulletin.status.toLowerCase()),children:bulletin.status})}),/*#__PURE__*/_jsx(\"td\",{children:bulletin.created_by}),/*#__PURE__*/_jsxs(\"td\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-small btn-preview\",onClick:()=>handlePreview(bulletin),title:\"Aper\\xE7u\",children:\"\\uD83D\\uDC41\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-small btn-history\",onClick:()=>handleViewHistory(bulletin.id),title:\"Historique\",children:\"\\uD83D\\uDCDC\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-small btn-delete\",onClick:()=>handleDeleteBulletin(bulletin.id),title:\"Supprimer\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})]},bulletin.id))})]})})]}),showCreateModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowCreateModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Cr\\xE9er un Nouveau Bulletin\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close\",onClick:()=>setShowCreateModal(false),children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateBulletin,className:\"form-bulletin\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Titre *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Ex: Critical Security Update\",value:formData.title,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{title:e.target.value})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Contenu\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"D\\xE9tails du bulletin...\",value:formData.body,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{body:e.target.value})),rows:\"5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"R\\xE9gions *\"}),/*#__PURE__*/_jsx(\"div\",{className:\"regions-checkboxes\",children:regions.map(region=>/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.regions.includes(region.name),onChange:()=>handleRegionToggle(region.name)}),region.name,/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'12px',color:'#999'},children:[\"(\",region.recipients?region.recipients.length:0,\" destinataires)\"]})]},region.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:()=>setShowCreateModal(false),children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",children:\"Cr\\xE9er Bulletin\"})]})]})]})}),showPreviewModal&&previewData&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowPreviewModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content large\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Aper\\xE7u & Envoi du Bulletin\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close\",onClick:()=>setShowPreviewModal(false),children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:previewData.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipients-info\",children:[Object.entries(previewData.recipient_counts).map(_ref=>{let[region,count]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"recipient-card\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[region,\":\"]}),\" \",count,\" destinataires\"]},region);}),/*#__PURE__*/_jsxs(\"div\",{className:\"recipient-card total\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total:\"}),\" \",previewData.total_recipients,\" destinataires\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"email-preview\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Aper\\xE7u Email\"}),/*#__PURE__*/_jsx(\"iframe\",{srcDoc:previewData.preview_html,style:{width:'100%',height:'400px',border:'1px solid #ddd',borderRadius:'4px'},title:\"Email Preview\"})]}),previewData.validation_errors.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-box\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u26A0\\uFE0F Erreurs de validation:\"}),/*#__PURE__*/_jsx(\"ul\",{children:previewData.validation_errors.map((err,i)=>/*#__PURE__*/_jsx(\"li\",{children:err},i))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:()=>setShowPreviewModal(false),children:\"Fermer\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-test\",onClick:()=>handleSendBulletin(selectedBulletin.id,true),disabled:!previewData.is_valid,children:\"\\uD83E\\uDDEA Envoi Test (Log)\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-primary\",onClick:()=>handleSendBulletin(selectedBulletin.id,false),disabled:!previewData.is_valid,children:\"\\uD83D\\uDCE4 Envoyer Bulletin\"})]})]})})]});}export default BulletinManagement;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","BulletinManagement","_stats$by_status","_stats$by_status2","bulletins","setBulletins","regions","setRegions","loading","setLoading","showCreateModal","setShowCreateModal","showPreviewModal","setShowPreviewModal","selectedBulletin","setSelectedBulletin","previewData","setPreviewData","formData","setFormData","title","body","cve_ids","stats","setStats","total_bulletins","by_status","total_recipients_contacted","fetchBulletins","fetchRegions","fetchStats","response","fetch","data","json","error","console","alert","message","handleCreateBulletin","e","preventDefault","trim","length","method","headers","JSON","stringify","_objectSpread","created_by","ok","Error","handlePreview","bulletin","concat","id","handleSendBulletin","bulletinId","testMode","arguments","undefined","find","b","test_mode","setTimeout","handleViewHistory","status","statistics","total_sent","total_failed","success_rate","toFixed","delivery_logs","map","l","action","region","join","handleDeleteBulletin","window","confirm","handleRegionToggle","regionName","prev","includes","filter","r","style","padding","textAlign","children","className","onClick","DRAFT","SENT","color","toLowerCase","stopPropagation","onSubmit","type","placeholder","value","onChange","target","required","rows","checked","name","fontSize","recipients","Object","entries","recipient_counts","_ref","count","total_recipients","srcDoc","preview_html","width","height","border","borderRadius","validation_errors","err","i","disabled","is_valid"],"sources":["C:/essai/CTBA_PROJECT/frontend/src/components/BulletinManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './BulletinManagement.css';\r\n\r\nfunction BulletinManagement() {\r\n  const [bulletins, setBulletins] = useState([]);\r\n  const [regions, setRegions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [showPreviewModal, setShowPreviewModal] = useState(false);\r\n  const [selectedBulletin, setSelectedBulletin] = useState(null);\r\n  const [previewData, setPreviewData] = useState(null);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    body: '',\r\n    regions: [],\r\n    cve_ids: []\r\n  });\r\n  \r\n  const [stats, setStats] = useState({\r\n    total_bulletins: 0,\r\n    by_status: {},\r\n    total_recipients_contacted: 0\r\n  });\r\n\r\n  // Charger donn√©es au d√©marrage\r\n  useEffect(() => {\r\n    fetchBulletins();\r\n    fetchRegions();\r\n    fetchStats();\r\n  }, []);\r\n\r\n  const fetchBulletins = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:8000/api/bulletins?limit=50&offset=0');\r\n      const data = await response.json();\r\n      setBulletins(data.bulletins || []);\r\n    } catch (error) {\r\n      console.error('Erreur chargement bulletins:', error);\r\n      alert('Erreur: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchRegions = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:8000/api/regions');\r\n      const data = await response.json();\r\n      setRegions(data || []);\r\n    } catch (error) {\r\n      console.error('Erreur chargement r√©gions:', error);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:8000/api/bulletins/stats/overview');\r\n      const data = await response.json();\r\n      setStats(data);\r\n    } catch (error) {\r\n      console.error('Erreur chargement stats:', error);\r\n    }\r\n  };\r\n\r\n  // Cr√©er bulletin\r\n  const handleCreateBulletin = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.title.trim()) {\r\n      alert('Le titre est requis');\r\n      return;\r\n    }\r\n    \r\n    if (formData.regions.length === 0) {\r\n      alert('S√©lectionnez au moins une r√©gion');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:8000/api/bulletins', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          ...formData,\r\n          created_by: 'analyst1'\r\n        })\r\n      });\r\n\r\n      if (!response.ok) throw new Error('Erreur cr√©ation bulletin');\r\n      \r\n      alert('‚úÖ Bulletin cr√©√© avec succ√®s!');\r\n      setFormData({ title: '', body: '', regions: [], cve_ids: [] });\r\n      setShowCreateModal(false);\r\n      fetchBulletins();\r\n      fetchStats();\r\n    } catch (error) {\r\n      console.error('Erreur:', error);\r\n      alert('Erreur: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // Afficher aper√ßu\r\n  const handlePreview = async (bulletin) => {\r\n    try {\r\n      const response = await fetch(\r\n        `http://localhost:8000/api/bulletins/${bulletin.id}/preview`,\r\n        {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ regions: bulletin.regions })\r\n        }\r\n      );\r\n\r\n      if (!response.ok) throw new Error('Erreur aper√ßu');\r\n\r\n      const data = await response.json();\r\n      setPreviewData(data);\r\n      setSelectedBulletin(bulletin);\r\n      setShowPreviewModal(true);\r\n    } catch (error) {\r\n      console.error('Erreur:', error);\r\n      alert('Erreur: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // Envoyer bulletin\r\n  const handleSendBulletin = async (bulletinId, testMode = false) => {\r\n    try {\r\n      const bulletin = bulletins.find(b => b.id === bulletinId);\r\n      \r\n      const response = await fetch(\r\n        `http://localhost:8000/api/bulletins/${bulletinId}/send`,\r\n        {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ \r\n            test_mode: testMode,\r\n            regions: bulletin.regions \r\n          })\r\n        }\r\n      );\r\n\r\n      if (!response.ok) throw new Error('Erreur envoi');\r\n\r\n      const data = await response.json();\r\n      alert(testMode ? '‚úÖ Mode test: Email enregistr√© en log' : '‚úÖ Bulletin envoy√©!');\r\n      setShowPreviewModal(false);\r\n      \r\n      // Traiter la queue\r\n      setTimeout(() => {\r\n        fetch('http://localhost:8000/api/bulletins/process-queue', { method: 'POST' });\r\n        fetchBulletins();\r\n        fetchStats();\r\n      }, 1000);\r\n    } catch (error) {\r\n      console.error('Erreur:', error);\r\n      alert('Erreur: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // Voir historique\r\n  const handleViewHistory = async (bulletinId) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:8000/api/bulletins/${bulletinId}/history`);\r\n      if (!response.ok) throw new Error('Erreur');\r\n\r\n      const data = await response.json();\r\n      alert(\r\n        `üìú Historique Bulletin ${bulletinId}\\n\\n` +\r\n        `Statut: ${data.bulletin.status}\\n` +\r\n        `Envoy√©s: ${data.statistics.total_sent}\\n` +\r\n        `√âchou√©s: ${data.statistics.total_failed}\\n` +\r\n        `Taux r√©ussite: ${data.statistics.success_rate.toFixed(1)}%\\n\\n` +\r\n        `Logs:\\n` +\r\n        data.delivery_logs.map(l => `- ${l.action} √† ${l.region}`).join('\\n')\r\n      );\r\n    } catch (error) {\r\n      console.error('Erreur:', error);\r\n      alert('Erreur: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // Supprimer bulletin\r\n  const handleDeleteBulletin = async (bulletinId) => {\r\n    if (!window.confirm('√ätes-vous s√ªr?')) return;\r\n\r\n    try {\r\n      const response = await fetch(`http://localhost:8000/api/bulletins/${bulletinId}`, {\r\n        method: 'DELETE'\r\n      });\r\n\r\n      if (!response.ok) throw new Error('Erreur');\r\n\r\n      alert('‚úÖ Bulletin supprim√©');\r\n      fetchBulletins();\r\n      fetchStats();\r\n    } catch (error) {\r\n      console.error('Erreur:', error);\r\n      alert('Erreur: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const handleRegionToggle = (regionName) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      regions: prev.regions.includes(regionName)\r\n        ? prev.regions.filter(r => r !== regionName)\r\n        : [...prev.regions, regionName]\r\n    }));\r\n  };\r\n\r\n  if (loading) {\r\n    return <div style={{ padding: '20px', textAlign: 'center' }}>‚è≥ Chargement...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"bulletin-container\">\r\n      <div className=\"bulletin-header\">\r\n        <h1>üìß Gestion des Bulletins</h1>\r\n        <button \r\n          className=\"btn-primary\"\r\n          onClick={() => setShowCreateModal(true)}\r\n        >\r\n          ‚ûï Nouveau Bulletin\r\n        </button>\r\n      </div>\r\n\r\n      {/* Statistiques */}\r\n      <div className=\"stats-grid\">\r\n        <div className=\"stat-card\">\r\n          <div className=\"stat-value\">{stats.total_bulletins}</div>\r\n          <div className=\"stat-label\">Bulletins Totaux</div>\r\n        </div>\r\n        <div className=\"stat-card\">\r\n          <div className=\"stat-value\">{stats.by_status?.DRAFT || 0}</div>\r\n          <div className=\"stat-label\">Brouillons</div>\r\n        </div>\r\n        <div className=\"stat-card\">\r\n          <div className=\"stat-value\">{stats.by_status?.SENT || 0}</div>\r\n          <div className=\"stat-label\">Envoy√©s</div>\r\n        </div>\r\n        <div className=\"stat-card\">\r\n          <div className=\"stat-value\">{stats.total_recipients_contacted || 0}</div>\r\n          <div className=\"stat-label\">Destinataires</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Liste des bulletins */}\r\n      <div className=\"bulletins-list\">\r\n        <h2>Bulletins R√©cents</h2>\r\n        {bulletins.length === 0 ? (\r\n          <p style={{ color: '#999' }}>Aucun bulletin trouv√©</p>\r\n        ) : (\r\n          <div className=\"table-responsive\">\r\n            <table className=\"bulletins-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Titre</th>\r\n                  <th>R√©gions</th>\r\n                  <th>Statut</th>\r\n                  <th>Cr√©√© par</th>\r\n                  <th>Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {bulletins.map(bulletin => (\r\n                  <tr key={bulletin.id}>\r\n                    <td><strong>{bulletin.title}</strong></td>\r\n                    <td>{bulletin.regions.join(', ')}</td>\r\n                    <td>\r\n                      <span className={`status-badge status-${bulletin.status.toLowerCase()}`}>\r\n                        {bulletin.status}\r\n                      </span>\r\n                    </td>\r\n                    <td>{bulletin.created_by}</td>\r\n                    <td className=\"actions\">\r\n                      <button\r\n                        className=\"btn-small btn-preview\"\r\n                        onClick={() => handlePreview(bulletin)}\r\n                        title=\"Aper√ßu\"\r\n                      >\r\n                        üëÅÔ∏è\r\n                      </button>\r\n                      <button\r\n                        className=\"btn-small btn-history\"\r\n                        onClick={() => handleViewHistory(bulletin.id)}\r\n                        title=\"Historique\"\r\n                      >\r\n                        üìú\r\n                      </button>\r\n                      <button\r\n                        className=\"btn-small btn-delete\"\r\n                        onClick={() => handleDeleteBulletin(bulletin.id)}\r\n                        title=\"Supprimer\"\r\n                      >\r\n                        üóëÔ∏è\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modal Cr√©ation */}\r\n      {showCreateModal && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowCreateModal(false)}>\r\n          <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h2>Cr√©er un Nouveau Bulletin</h2>\r\n              <button\r\n                className=\"btn-close\"\r\n                onClick={() => setShowCreateModal(false)}\r\n              >\r\n                ‚úï\r\n              </button>\r\n            </div>\r\n\r\n            <form onSubmit={handleCreateBulletin} className=\"form-bulletin\">\r\n              <div className=\"form-group\">\r\n                <label>Titre *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Ex: Critical Security Update\"\r\n                  value={formData.title}\r\n                  onChange={e => setFormData({ ...formData, title: e.target.value })}\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Contenu</label>\r\n                <textarea\r\n                  placeholder=\"D√©tails du bulletin...\"\r\n                  value={formData.body}\r\n                  onChange={e => setFormData({ ...formData, body: e.target.value })}\r\n                  rows=\"5\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>R√©gions *</label>\r\n                <div className=\"regions-checkboxes\">\r\n                  {regions.map(region => (\r\n                    <label key={region.id} className=\"checkbox-label\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={formData.regions.includes(region.name)}\r\n                        onChange={() => handleRegionToggle(region.name)}\r\n                      />\r\n                      {region.name}\r\n                      <span style={{ fontSize: '12px', color: '#999' }}>\r\n                        ({region.recipients ? region.recipients.length : 0} destinataires)\r\n                      </span>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"modal-footer\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn-secondary\"\r\n                  onClick={() => setShowCreateModal(false)}\r\n                >\r\n                  Annuler\r\n                </button>\r\n                <button type=\"submit\" className=\"btn-primary\">\r\n                  Cr√©er Bulletin\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal Aper√ßu */}\r\n      {showPreviewModal && previewData && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowPreviewModal(false)}>\r\n          <div className=\"modal-content large\" onClick={e => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h2>Aper√ßu & Envoi du Bulletin</h2>\r\n              <button\r\n                className=\"btn-close\"\r\n                onClick={() => setShowPreviewModal(false)}\r\n              >\r\n                ‚úï\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"preview-content\">\r\n              <div className=\"preview-info\">\r\n                <h3>{previewData.title}</h3>\r\n                <div className=\"recipients-info\">\r\n                  {Object.entries(previewData.recipient_counts).map(([region, count]) => (\r\n                    <div key={region} className=\"recipient-card\">\r\n                      <strong>{region}:</strong> {count} destinataires\r\n                    </div>\r\n                  ))}\r\n                  <div className=\"recipient-card total\">\r\n                    <strong>Total:</strong> {previewData.total_recipients} destinataires\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"email-preview\">\r\n                <h4>Aper√ßu Email</h4>\r\n                <iframe\r\n                  srcDoc={previewData.preview_html}\r\n                  style={{\r\n                    width: '100%',\r\n                    height: '400px',\r\n                    border: '1px solid #ddd',\r\n                    borderRadius: '4px'\r\n                  }}\r\n                  title=\"Email Preview\"\r\n                />\r\n              </div>\r\n\r\n              {previewData.validation_errors.length > 0 && (\r\n                <div className=\"error-box\">\r\n                  <strong>‚ö†Ô∏è Erreurs de validation:</strong>\r\n                  <ul>\r\n                    {previewData.validation_errors.map((err, i) => (\r\n                      <li key={i}>{err}</li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-secondary\"\r\n                onClick={() => setShowPreviewModal(false)}\r\n              >\r\n                Fermer\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-test\"\r\n                onClick={() => handleSendBulletin(selectedBulletin.id, true)}\r\n                disabled={!previewData.is_valid}\r\n              >\r\n                üß™ Envoi Test (Log)\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-primary\"\r\n                onClick={() => handleSendBulletin(selectedBulletin.id, false)}\r\n                disabled={!previewData.is_valid}\r\n              >\r\n                üì§ Envoyer Bulletin\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BulletinManagement;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}